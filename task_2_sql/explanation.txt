Для связей товаров и категорий используется связь многие-ко-многим через таблицу.
Поэтому в запросах используется два джоина.
Связи в категориях являются иерархичными. Для того чтобы получить список всех родительских или дочерних категорий 
необходимо делать несколько запросов количество которых равно уровню вложенностей.
Для оптимизации этой операции был применен алгоритм preorder traversal tree который позволяет получить родительские или
дочерние узлы за один запрос. 
Правда в запросах 3.b и 3.e используются 2 подзапроса, но в приложение от них можно избавиться просто подставив значения r и l 
целевой категории.
Скорость поиска в дереве омрачаться скоростью создания и обновления данных. Так как после каждого изменения категорий 
(за исключением переименования) необходимо перестраивать дерево.
